# QUICK SETUP GUIDE - Integrate with Existing Systems

## ðŸš€ **Setup in 15 Minutes**

### **Step 1: Copy Files (3 min)**

```bash
# Copy all learning files
mkdir -p server/learning
cp BoxedLearningAlgorithm.ts server/learning/
cp KnowledgeEngineLearning.ts server/learning/
cp MemoryLearningEngines.ts server/learning/
cp CuriosityEngineLearning.ts server/learning/
cp learning-integration.ts server/learning/
```

### **Step 2: Initialize in Server (5 min)**

**File:** `server/index.ts` (or your main server file)

Add this **near the top**, after imports:

```typescript
// ADD THIS: Import learning system
import { initializeLearningSystem, getLearningHealth } from './learning/learning-integration';

// ... your existing imports ...
```

Add this **after database connection**, before starting server:

```typescript
// ... existing server setup ...

// ADD THIS: Initialize learning system
const learning = initializeLearningSystem();
console.log('[SERVER] Learning system initialized');

// ... rest of server startup ...
```

### **Step 3: Add to Health Endpoint (2 min)**

**File:** `server/routes/health.ts` or wherever `/api/health` is defined

```typescript
import { getLearningHealth } from '../learning/learning-integration';

router.get('/health', async (req, res) => {
  const health = {
    // Your existing checks
    database: await checkDatabase(),
    redis: await checkRedis(),
    memory: process.memoryUsage(),
    uptime: process.uptime(),
    
    // ADD THIS: Learning health
    ...await getLearningHealth(),
  };
  
  res.json(health);
});
```

### **Step 4: Add Learning Metrics Endpoint (3 min)**

**File:** `server/routes/learning-routes.ts` (CREATE NEW)

```typescript
import { Router } from 'express';
import { requireAuth } from '../middleware/auth-guard';
import { 
  learningMonitor, 
  getLearningMetrics,
  knowledgeEngine,
  memoryOptimizer,
  memoryAssistant,
  curiosityEngine 
} from '../learning/learning-integration';

const router = Router();

// Get current learning metrics
router.get('/metrics', requireAuth, async (req, res) => {
  const { engine, limit } = req.query;
  
  const metrics = getLearningMetrics(
    engine as string | undefined,
    limit ? parseInt(limit as string) : undefined
  );
  
  res.json({ ok: true, ...metrics });
});

// Get specific engine details
router.get('/engines/:name', requireAuth, async (req, res) => {
  const { name } = req.params;
  
  const engines: any = {
    knowledge: knowledgeEngine,
    'memory-optimizer': memoryOptimizer,
    'memory-assistant': memoryAssistant,
    curiosity: curiosityEngine,
  };
  
  const engine = engines[name];
  if (!engine) {
    return res.status(404).json({ ok: false, error: 'Engine not found' });
  }
  
  res.json({
    ok: true,
    engine: name,
    state: engine.getState(),
    metrics: engine.getMetrics(),
  });
});

// Reset engine (requires creator role)
router.post('/engines/:name/reset', requireAuth, async (req, res) => {
  // Only creator can reset
  if (req.userRole !== 'creator') {
    return res.status(403).json({ ok: false, error: 'Only creator can reset' });
  }
  
  const { name } = req.params;
  
  const engines: any = {
    knowledge: knowledgeEngine,
    'memory-optimizer': memoryOptimizer,
    'memory-assistant': memoryAssistant,
    curiosity: curiosityEngine,
  };
  
  const engine = engines[name];
  if (!engine) {
    return res.status(404).json({ ok: false, error: 'Engine not found' });
  }
  
  await engine.reset();
  
  res.json({ ok: true, message: `${name} reset successfully` });
});

export default router;
```

**Add to main router:**

```typescript
// server/index.ts
import learningRoutes from './routes/learning-routes';

app.use('/api/learning', learningRoutes);
```

### **Step 5: Test It Works (2 min)**

```bash
# Restart server
npm run server

# Test health endpoint
curl http://localhost:3001/api/health

# Should see learning metrics in response!

# Test learning endpoint
curl http://localhost:3001/api/learning/metrics

# Should see detailed learning metrics!
```

---

## âœ… **That's It!**

Your learning system is now:
- âœ… Integrated with live monitoring
- âœ… Scheduled for automatic maintenance
- âœ… Storing state in memory system (hanging plant)
- âœ… Self-maintaining via meta-maintenance

---

## ðŸ”§ **Use the Learning Engines**

### **In Your Knowledge Engine:**

**File:** `server/ai/knowledge-engine.ts`

```typescript
import { knowledgeEngine } from '../learning/learning-integration';

export async function fuseAIResponses(context: any, responses: any[]) {
  // Use learning engine to fuse responses
  const result = await knowledgeEngine.fuse(context, responses);
  
  return {
    answer: result.finalAnswer,
    coherence: result.coherenceScore,
    confidence: result.confidenceScore,
    strategy: result.fusionStrategy,
    metrics: {
      domainsUsed: result.domainsCombined,
      aiUsed: result.aiUsed,
    },
  };
}
```

### **In Your Memory System:**

**File:** `server/memory/optimizer.ts`

```typescript
import { memoryOptimizer } from '../learning/learning-integration';

export async function shouldKeepMemory(memory: any) {
  // Use learning engine to decide
  const decision = await memoryOptimizer.optimizeMemory(memory, {
    systemHealth: 'good',
  });
  
  return decision.action; // 'keep', 'compress', 'archive', or 'delete'
}
```

**File:** `server/memory/retrieval.ts`

```typescript
import { memoryAssistant } from '../learning/learning-integration';

export async function getRelevantMemories(query: string, userId: string) {
  // Use learning engine to retrieve
  const result = await memoryAssistant.retrieveMemories({
    query,
    userId,
    context: {},
    maxResults: 10,
  });
  
  return result.memories; // Sorted by relevance
}
```

### **In Your AI System:**

**File:** `server/ai/self-improvement.ts`

```typescript
import { curiosityEngine } from '../learning/learning-integration';

export async function explorKnowledgeGaps(systemState: any) {
  // Use curiosity engine
  const action = await curiosityEngine.performCuriosity(systemState);
  
  if (action) {
    console.log('[CURIOSITY] Exploring:', action.type, action.target);
    // Act on the curiosity action
  }
}
```

---

## ðŸ“Š **Monitor Learning Progress**

### **View Metrics:**

```bash
# Overall health
curl http://localhost:3001/api/health

# Detailed metrics
curl http://localhost:3001/api/learning/metrics

# Specific engine
curl http://localhost:3001/api/learning/engines/knowledge

# History for specific engine
curl http://localhost:3001/api/learning/metrics?engine=knowledge&limit=50
```

### **In Secure Portal:**

Add to your admin dashboard:

```typescript
// Fetch learning metrics
const metrics = await fetch('/api/learning/metrics');
const data = await metrics.json();

// Display in dashboard
{data.current.learning.engines.map(engine => (
  <div key={engine.name}>
    <h3>{engine.name}</h3>
    <p>Success Rate: {(engine.successRate * 100).toFixed(1)}%</p>
    <p>Confidence: {(engine.confidence * 100).toFixed(1)}%</p>
    <p>Iterations: {engine.totalIterations}</p>
  </div>
))}
```

---

## ðŸ”„ **Automatic Maintenance Schedule**

The system now automatically:

| Frequency | Task | What It Does |
|-----------|------|--------------|
| **Hourly** | Save State | Persists learning progress |
| **Every 6h** | Performance Check | Alerts if degradation |
| **Daily** | Collect Metrics | Tracks progress trends |
| **Daily** | Meta-Maintenance | Memory optimizes learning states |
| **Weekly** | Cleanup | Removes old data |

---

## ðŸš¨ **Emergency Controls**

### **Disable Learning:**

```bash
# Add to .env
DISABLE_LEARNING=true

# Or in code:
const DISABLE_LEARNING = process.env.DISABLE_LEARNING === 'true';

if (DISABLE_LEARNING) {
  // Use old mechanical engines
  return oldEngine(input);
}
```

### **Reset Specific Engine:**

```bash
curl -X POST http://localhost:3001/api/learning/engines/knowledge/reset \
  -H "Authorization: Bearer YOUR_TOKEN"
```

### **Check Health:**

```bash
curl http://localhost:3001/api/health | jq '.learning'
```

---

## ðŸ’¡ **Key Points**

1. **Nothing breaks** - Old systems keep working
2. **Fully integrated** - Monitoring, scheduler, memory all connected
3. **Self-maintaining** - Engines optimize themselves
4. **Easy rollback** - One environment variable
5. **Automatic** - Runs without manual intervention

**Your system is now adaptive and self-improving!** ðŸš€
